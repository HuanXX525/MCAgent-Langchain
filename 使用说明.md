# æˆ‘çš„ä¸–ç•ŒAgentä¼™ä¼´ - ä½¿ç”¨è¯´æ˜

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäºAIçš„Minecraftæœºå™¨äººé¡¹ç›®ï¼Œèƒ½å¤Ÿæ ¹æ®ç©å®¶çš„èŠå¤©æ¶ˆæ¯æ™ºèƒ½åœ°æ‰§è¡Œå„ç§æ¸¸æˆå†…ä»»åŠ¡ã€‚

**æŠ€æœ¯æ ˆï¼š**
- å‰ç«¯ï¼šNode.js + mineflayer + mineflayer-pathfinder
- åç«¯ï¼šPython + FastAPI + LangChain + GPT API
- é€šä¿¡ï¼šHTTP + WebSocket

## å¿«é€Ÿå¼€å§‹

### 1. é…ç½®

ç¼–è¾‘ `config.json` æ–‡ä»¶ï¼š

```json
{
  "minecraft": {
    "host": "localhost",      // MinecraftæœåŠ¡å™¨åœ°å€
    "port": 12345,           // æœåŠ¡å™¨ç«¯å£
    "username": "Alice",     // æœºå™¨äººç”¨æˆ·å
    "version": "1.19.2"      // Minecraftç‰ˆæœ¬
  },
  "gpt": {
    "api_key": "your-api-key-here",  // æ›¿æ¢ä¸ºä½ çš„GPT APIå¯†é’¥
    "base_url": "https://api.openai.com/v1",
    "model": "gpt-4",
    "temperature": 0.7,
    "max_tokens": 2000
  }
}
```

**é‡è¦ï¼š** è¯·åœ¨ `config.json` ä¸­å¡«å…¥ä½ çš„GPT APIå¯†é’¥ï¼

### 2. å®‰è£…ä¾èµ–

#### å‰ç«¯ï¼ˆNode.jsï¼‰

```bash
cd frontend
npm install
```

#### åç«¯ï¼ˆPythonï¼‰

```bash
cd backend
conda activate MCBot  # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
pip install -r requirements.txt
```

### 3. å¯åŠ¨æœåŠ¡

#### æ­¥éª¤1ï¼šå¯åŠ¨åç«¯æœåŠ¡å™¨

```bash
cd backend
conda activate MCBot
python main.py
```

çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¡¨ç¤ºåç«¯å¯åŠ¨æˆåŠŸï¼š
```
å¯åŠ¨æœåŠ¡å™¨: localhost:8000
WebSocketåœ°å€: ws://localhost:8000/ws
APIåœ°å€: http://localhost:8000/api/chat
æ­£åœ¨åˆå§‹åŒ–Minecraft Agent...
Minecraft Agentåˆå§‹åŒ–æˆåŠŸï¼
```

#### æ­¥éª¤2ï¼šå¯åŠ¨MinecraftæœåŠ¡å™¨

ç¡®ä¿ä½ çš„MinecraftæœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼ˆåœ°å€å’Œç«¯å£ä¸config.jsonä¸­é…ç½®çš„ä¸€è‡´ï¼‰

#### æ­¥éª¤3ï¼šå¯åŠ¨å‰ç«¯æœºå™¨äºº

```bash
cd frontend/src
node Bot-Start.js
```

çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¡¨ç¤ºæœºå™¨äººè¿æ¥æˆåŠŸï¼š
```
é…ç½®å·²åŠ è½½
æœºå™¨äººå·²ç™»å½•
æŠ€èƒ½ç³»ç»Ÿå·²åŠ è½½
æ­£åœ¨è¿æ¥åç«¯...
WebSocketå·²è¿æ¥åˆ°åç«¯
```

## ä½¿ç”¨æ–¹æ³•

åœ¨Minecraftæ¸¸æˆä¸­ï¼Œé€šè¿‡ `@æœºå™¨äººåç§°` æ¥ä¸æœºå™¨äººå¯¹è¯ï¼š

### ç¤ºä¾‹å‘½ä»¤

```
@Alice ä½ å¥½
@Alice ç§»åŠ¨åˆ°åæ ‡ 100 64 200
@Alice å¸®æˆ‘æŒ–3ä¸ªé’»çŸ³çŸ¿çŸ³
@Alice è·Ÿç€æˆ‘
@Alice æŒ–æ‰å‰é¢çš„çŸ³å¤´
```

### æœºå™¨äººèƒ½åŠ›

æœºå™¨äººç›®å‰æ”¯æŒä»¥ä¸‹æŠ€èƒ½ï¼š

1. **ç§»åŠ¨æŠ€èƒ½**
   - ç§»åŠ¨åˆ°æŒ‡å®šåæ ‡
   - è·Ÿéšç©å®¶
   - æ¥åˆ°ç©å®¶èº«è¾¹

2. **æŒ–æ˜æŠ€èƒ½**
   - å¯»æ‰¾å¹¶æŒ–æ˜æŒ‡å®šç±»å‹çš„æ–¹å—
   - æŒ–æ˜æŒ‡å®šåæ ‡çš„æ–¹å—
   - æ‰¹é‡æŒ–æ˜åŒºåŸŸå†…çš„æ–¹å—

3. **æ„ŸçŸ¥æŠ€èƒ½**
   - è·å–æ¸¸æˆçŠ¶æ€
   - æŸ¥çœ‹ç‰©å“æ 
   - æ£€æµ‹é™„è¿‘å®ä½“å’Œç©å®¶
   - æŸ¥æ‰¾é™„è¿‘çš„ç‰¹å®šæ–¹å—

## é¡¹ç›®ç»“æ„

```
MCBot/
â”œâ”€â”€ config.json              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ frontend/                # å‰ç«¯ï¼ˆNode.jsï¼‰
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ Bot-Start.js     # ä¸»å…¥å£
â”‚       â”œâ”€â”€ config.js        # é…ç½®åŠ è½½
â”‚       â”œâ”€â”€ apiClient.js     # åç«¯é€šä¿¡
â”‚       â”œâ”€â”€ skillManager.js  # æŠ€èƒ½ç®¡ç†
â”‚       â””â”€â”€ skills/          # æŠ€èƒ½æ¨¡å—
â”‚           â”œâ”€â”€ movement.js  # ç§»åŠ¨æŠ€èƒ½
â”‚           â”œâ”€â”€ mining.js    # æŒ–æ˜æŠ€èƒ½
â”‚           â””â”€â”€ perception.js # æ„ŸçŸ¥æŠ€èƒ½
â””â”€â”€ backend/                 # åç«¯ï¼ˆPythonï¼‰
    â”œâ”€â”€ main.py              # FastAPIæœåŠ¡å™¨
    â”œâ”€â”€ config.py            # é…ç½®åŠ è½½
    â”œâ”€â”€ models.py            # æ•°æ®æ¨¡å‹
    â”œâ”€â”€ api/                 # APIæ¥å£
    â”‚   â”œâ”€â”€ chat.py          # èŠå¤©å¤„ç†
    â”‚   â””â”€â”€ websocket.py     # WebSocketç®¡ç†
    â”œâ”€â”€ agent/               # AI Agent
    â”‚   â””â”€â”€ conversational.py # å¯¹è¯Agent
    â””â”€â”€ tools/               # LangChainå·¥å…·
        â”œâ”€â”€ movement.py      # ç§»åŠ¨å·¥å…·
        â””â”€â”€ mining.py        # æŒ–æ˜å·¥å…·
```

## å·¥ä½œåŸç†

1. **ç”¨æˆ·åœ¨æ¸¸æˆä¸­å‘é€æ¶ˆæ¯**ï¼š`@Alice å¸®æˆ‘æŒ–3ä¸ªé’»çŸ³`

2. **å‰ç«¯ç›‘å¬å¹¶å¤„ç†**ï¼š
   - Bot-Start.js ç›‘å¬èŠå¤©äº‹ä»¶
   - æå–ç”¨æˆ·æ¶ˆæ¯
   - æ”¶é›†æ¸¸æˆçŠ¶æ€ï¼ˆä½ç½®ã€ç”Ÿå‘½å€¼ã€ç‰©å“æ ç­‰ï¼‰

3. **å‘é€åˆ°åç«¯**ï¼š
   - é€šè¿‡HTTP POSTå‘é€åˆ° `/api/chat`
   - åŒ…å«ç”¨æˆ·æ¶ˆæ¯å’Œæ¸¸æˆä¸Šä¸‹æ–‡

4. **åç«¯AIå†³ç­–**ï¼š
   - LangChain Agentåˆ†æç”¨æˆ·æ„å›¾
   - GPT-4ç†è§£ä»»åŠ¡éœ€æ±‚
   - é€‰æ‹©åˆé€‚çš„å·¥å…·ï¼ˆmine_blockï¼‰
   - ç”Ÿæˆæ‰§è¡Œå‚æ•°

5. **æ‰§è¡ŒæŠ€èƒ½**ï¼š
   - åç«¯é€šè¿‡WebSocketå‘é€è¡ŒåŠ¨æŒ‡ä»¤
   - å‰ç«¯SkillManageræ‰§è¡Œå¯¹åº”æŠ€èƒ½
   - ä½¿ç”¨mineflayer APIæ§åˆ¶æ¸¸æˆå†…æœºå™¨äºº

6. **åé¦ˆç»“æœ**ï¼š
   - å‰ç«¯é€šè¿‡WebSocketè¿”å›æ‰§è¡Œç»“æœ
   - åç«¯ç»§ç»­ä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼ˆå¦‚æœéœ€è¦ï¼‰
   - æœ€ç»ˆå›å¤ç”¨æˆ·

## æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šåç«¯å¯åŠ¨å¤±è´¥

**åŸå› **ï¼šä¾èµ–æœªå®‰è£…æˆ–é…ç½®é”™è¯¯

**è§£å†³**ï¼š
```bash
conda activate MCBot
pip install -r requirements.txt
```

æ£€æŸ¥ `config.json` ä¸­çš„ GPT API å¯†é’¥æ˜¯å¦æ­£ç¡®

### é—®é¢˜2ï¼šå‰ç«¯æ— æ³•è¿æ¥åç«¯

**åŸå› **ï¼šåç«¯æœªå¯åŠ¨æˆ–ç«¯å£è¢«å ç”¨

**è§£å†³**ï¼š
1. ç¡®ä¿åç«¯å·²å¯åŠ¨
2. æ£€æŸ¥ `config.json` ä¸­çš„åç«¯ç«¯å£é…ç½®
3. å°è¯•æ›´æ¢ç«¯å£ï¼ˆå¦‚8001ï¼‰

### é—®é¢˜3ï¼šæœºå™¨äººæ— æ³•è¿æ¥MinecraftæœåŠ¡å™¨

**åŸå› **ï¼šæœåŠ¡å™¨åœ°å€æˆ–ç«¯å£é”™è¯¯

**è§£å†³**ï¼š
1. æ£€æŸ¥ `config.json` ä¸­çš„ minecraft é…ç½®
2. ç¡®ä¿MinecraftæœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
3. ç¡®è®¤æœåŠ¡å™¨ç‰ˆæœ¬ä¸é…ç½®åŒ¹é…

### é—®é¢˜4ï¼šæœºå™¨äººä¸å“åº”@æ¶ˆæ¯

**åŸå› **ï¼šWebSocketè¿æ¥æ–­å¼€æˆ–åç«¯Agentæœªåˆå§‹åŒ–

**è§£å†³**ï¼š
1. æŸ¥çœ‹å‰ç«¯æ§åˆ¶å°æ˜¯å¦æ˜¾ç¤º "WebSocketå·²è¿æ¥"
2. æŸ¥çœ‹åç«¯æ§åˆ¶å°æ˜¯å¦æ˜¾ç¤º "Agentåˆå§‹åŒ–æˆåŠŸ"
3. é‡å¯å‰ç«¯å’Œåç«¯æœåŠ¡

## æ‰©å±•å¼€å‘

### æ·»åŠ æ–°æŠ€èƒ½

1. **å‰ç«¯æ·»åŠ æŠ€èƒ½**ï¼ˆ`frontend/src/skills/`ï¼‰ï¼š

```javascript
// ç¤ºä¾‹ï¼šbuilding.js
class BuildingSkill {
  constructor(bot) {
    this.bot = bot;
  }

  async placeBlock(x, y, z, blockType) {
    // å®ç°æ”¾ç½®æ–¹å—é€»è¾‘
  }
}

module.exports = BuildingSkill;
```

2. **åœ¨SkillManagerä¸­æ³¨å†Œ**ï¼š

```javascript
const BuildingSkill = require('./skills/building');

this.skills = {
  // ...å…¶ä»–æŠ€èƒ½
  building: new BuildingSkill(bot)
};
```

3. **åç«¯æ·»åŠ å·¥å…·**ï¼ˆ`backend/tools/`ï¼‰ï¼š

```python
from langchain.tools import BaseTool

class PlaceBlockTool(BaseTool):
    name = "place_block"
    description = "åœ¨æŒ‡å®šä½ç½®æ”¾ç½®æ–¹å—"
    # å®ç°å·¥å…·é€»è¾‘
```

4. **åœ¨Agentä¸­æ³¨å†Œå·¥å…·**ï¼š

```python
from tools.building import PlaceBlockTool

self.tools = [
    # ...å…¶ä»–å·¥å…·
    PlaceBlockTool(websocket_manager=websocket_manager)
]
```

## æ³¨æ„äº‹é¡¹

1. **APIå¯†é’¥å®‰å…¨**ï¼šä¸è¦å°†åŒ…å«çœŸå®APIå¯†é’¥çš„ `config.json` æäº¤åˆ°Gitä»“åº“
2. **æœåŠ¡å™¨æƒé™**ï¼šç¡®ä¿æœºå™¨äººåœ¨æœåŠ¡å™¨ä¸Šæœ‰ç›¸åº”çš„æƒé™
3. **èµ„æºæ¶ˆè€—**ï¼šGPT APIè°ƒç”¨ä¼šäº§ç”Ÿè´¹ç”¨ï¼Œæ³¨æ„æ§åˆ¶ä½¿ç”¨é¢‘ç‡
4. **ç½‘ç»œå»¶è¿Ÿ**ï¼šå¤æ‚ä»»åŠ¡å¯èƒ½éœ€è¦å‡ ç§’é’Ÿå¤„ç†æ—¶é—´

## æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. å‰ç«¯æ§åˆ¶å°è¾“å‡º
2. åç«¯æ§åˆ¶å°è¾“å‡º
3. config.json é…ç½®æ˜¯å¦æ­£ç¡®
4. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ğŸ®
